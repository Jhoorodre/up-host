# Indexador JSON - Aplica√ß√£o Standalone

## üìã Vis√£o Geral

O **Indexador JSON** √© uma aplica√ß√£o standalone especializada em criar e gerenciar automaticamente arquivos de √≠ndice que catalogam todas as **URLs RAW dos JSONs** de manga/manhwa de grupos de scanlation. 

Esta aplica√ß√£o foi separada do Manga Uploader Pro para ser um sistema independente, focado exclusivamente na cria√ß√£o de indexadores profissionais compat√≠veis com readers como **Tachiyomi** e aplica√ß√µes web.

---

## üéØ Objetivos da Aplica√ß√£o Standalone

### **Por que uma aplica√ß√£o separada?**
1. **Especializa√ß√£o**: Foco exclusivo no sistema de indexa√ß√£o
2. **Independ√™ncia**: N√£o depende do uploader de mang√°s
3. **Flexibilidade**: Pode trabalhar com JSONs de qualquer fonte
4. **Performance**: Aplica√ß√£o mais leve e r√°pida
5. **Distribui√ß√£o**: Facilita uso por diferentes grupos

### **P√∫blico-alvo:**
- **Grupos de scanlation** que querem criar cat√°logos profissionais
- **Desenvolvedores** que mant√™m sites/apps de manga
- **Comunidades** que precisam de APIs JSON organizadas
- **Usu√°rios** que querem seus pr√≥prios indexadores personalizados

---

## üèóÔ∏è Arquitetura da Aplica√ß√£o Standalone

### **Tecnologias Recomendadas:**
```
Frontend: 
  - QML + Python (compat√≠vel com Manga Uploader Pro)
  - OU React/Vue.js para vers√£o web
  - OU CLI puro em Python

Backend/Core:
  - Python 3.8+ com Pydantic para valida√ß√£o
  - httpx para requests ass√≠ncronos
  - pathlib para manipula√ß√£o de arquivos
  - loguru para logging avan√ßado

Funcionalidades:
  - Scanner de JSONs locais e remotos
  - Gerador de indexadores autom√°tico
  - Validador de URLs CDN
  - Uploader para GitHub/reposit√≥rios
  - API REST opcional
```

### **Estrutura do Projeto:**
```
indexador-json/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/          # Modelos Pydantic (extra√≠dos do Manga Uploader)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ indexador.py # Todos os modelos de indexa√ß√£o
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ common.py    # Modelos compartilhados
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ scanner.py   # Scanner de JSONs
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ generator.py # Gerador de indexadores
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ validator.py # Validador de URLs/CDN
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ uploader.py  # Upload para GitHub/repos
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.py        # Configura√ß√µes da aplica√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ ui/                  # Interface (QML ou Web)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ qml/            # Se for QML
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ web/            # Se for web
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ cli/            # Interface CLI
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îú‚îÄ‚îÄ helpers.py      # Fun√ß√µes auxiliares
‚îÇ       ‚îú‚îÄ‚îÄ sanitizer.py    # Sanitiza√ß√£o de nomes
‚îÇ       ‚îî‚îÄ‚îÄ cdn.py          # Utilities CDN
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îú‚îÄ‚îÄ API.md              # Documenta√ß√£o da API
‚îÇ   ‚îú‚îÄ‚îÄ USAGE.md            # Como usar
‚îÇ   ‚îî‚îÄ‚îÄ EXAMPLES.md         # Exemplos pr√°ticos
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ test_scanner.py
‚îÇ   ‚îú‚îÄ‚îÄ test_generator.py
‚îÇ   ‚îî‚îÄ‚îÄ test_validator.py
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ pyproject.toml
‚îî‚îÄ‚îÄ main.py                 # Entry point
```

---

## üîÑ Funcionalidades Core

### **1. Scanner de JSONs**
```python
class JSONScanner:
    """Escaneia JSONs locais e remotos"""
    
    async def scan_local_folder(self, path: Path) -> List[SeriesInfo]:
        """Escaneia pasta local por JSONs v√°lidos"""
        
    async def scan_github_repo(self, repo: str, folder: str = "") -> List[SeriesInfo]:
        """Escaneia reposit√≥rio GitHub"""
        
    async def scan_remote_urls(self, urls: List[str]) -> List[SeriesInfo]:
        """Valida lista de URLs remotas"""
        
    def validate_manga_json(self, data: dict) -> bool:
        """Valida se JSON √© formato de manga v√°lido"""
```

### **2. Gerador de Indexadores**
```python
class IndexadorGenerator:
    """Gera indexadores no formato padr√£o"""
    
    def generate_hub_indexador(self, series_list: List[SeriesInfo], 
                              hub_config: HubConfig) -> IndexadorData:
        """Gera indexador principal do hub"""
        
    def generate_api_endpoints(self, indexador: IndexadorData) -> Dict[str, Any]:
        """Gera endpoints de API autom√°ticos"""
        
    def generate_search_index(self, series_list: List[SeriesInfo]) -> Dict[str, Any]:
        """Gera √≠ndice de busca otimizado"""
```

### **3. Validador de CDN**
```python
class CDNValidator:
    """Valida status de URLs CDN"""
    
    async def test_cdn_url(self, url: str) -> CDNStatus:
        """Testa status individual de URL"""
        
    async def batch_validate(self, urls: List[str]) -> List[CDNStatus]:
        """Valida√ß√£o em lote de URLs"""
        
    async def monitor_cdn_health(self, indexador: IndexadorData) -> HealthReport:
        """Monitora sa√∫de das CDNs do indexador"""
```

### **4. GitHub Integration**
```python
class GitHubUploader:
    """Upload e sincroniza√ß√£o com GitHub"""
    
    async def upload_indexador(self, indexador: IndexadorData, 
                              repo_config: RepoConfig) -> bool:
        """Upload do indexador para GitHub"""
        
    async def sync_with_github(self, local_path: Path, 
                              repo_config: RepoConfig) -> SyncReport:
        """Sincroniza JSONs locais com GitHub"""
        
    async def create_release(self, version: str, 
                           changelog: str) -> bool:
        """Cria release autom√°tico"""
```

---

## üìä Formatos de Indexador

### **Indexador Principal (index.json)**
```json
{
  "v": "2.1",
  "updated": "2025-07-29T10:30:00Z",
  "hub": {
    "id": "grupo-scan-hub",
    "name": "Grupo Scan Brasil",
    "subtitle": "Mang√°s e Manhwas em Portugu√™s",
    "description": "Grupo brasileiro especializado em s√©ries de a√ß√£o",
    "cover": "https://files.catbox.moe/hub-cover.jpg",
    "website": "https://gruposcan.com.br",
    "lang": "pt-BR",
    "disclaimer": "Lembre-se sempre de apoiar o autor original!"
  },
  "social": [
    {
      "id": "discord",
      "name": "Discord",
      "platform": "discord",
      "url": "https://discord.gg/exemplo",
      "description": "Servidor principal do grupo",
      "primary": true,
      "memberCount": "1500+",
      "features": ["chat", "releases", "support"]
    },
    {
      "id": "telegram",
      "name": "Telegram",
      "platform": "telegram", 
      "url": "https://t.me/gruposcan",
      "description": "Canal de an√∫ncios",
      "primary": false,
      "features": ["announcements"]
    }
  ],
  "featured": [
    {
      "id": "manga-destaque-1",
      "title": "Manga em Destaque",
      "slug": "manga-destaque",
      "cover": "https://images.catbox.moe/cover.jpg",
      "status": "ongoing",
      "chapters": 45,
      "rating": 4.8,
      "url": "https://cdn.jsdelivr.net/gh/grupo/repo@main/manga.json",
      "priority": 1,
      "latest": true,
      "tags": ["a√ß√£o", "aventura"]
    }
  ],
  "statistics": {
    "overview": {
      "total_series": 25,
      "total_chapters": 890,
      "active_series": 18,
      "completed_series": 7
    },
    "team": {
      "total_members": 12,
      "translators": 4,
      "editors": 3,
      "typesetters": 3,
      "quality_assurance": 2
    },
    "community": {
      "discord_members": 1500,
      "telegram_members": 800,
      "total_followers": 2300
    },
    "content": {
      "avg_rating": 4.6,
      "total_votes": 1250,
      "monthly_releases": 45,
      "weekly_releases": 12
    }
  },
  "api": {
    "base_url": "https://cdn.jsdelivr.net/gh/grupo/repo@main/",
    "endpoints": {
      "all_series": "api/series.json",
      "search": "api/search.json",
      "featured": "api/featured.json",
      "statistics": "api/stats.json"
    }
  },
  "technical": {
    "cache": {
      "cdn_ttl": 3600,
      "api_ttl": 1800,
      "image_ttl": 86400
    },
    "formats": {
      "supported_images": ["jpg", "png", "webp"],
      "json_version": "2.1",
      "encoding": "utf-8"
    }
  }
}
```

### **API Endpoints Autom√°ticos**

#### **api/series.json** (Lista completa)
```json
{
  "total": 25,
  "updated": "2025-07-29T10:30:00Z",
  "series": [
    {
      "id": "manga-1",
      "title": "Nome do Manga",
      "slug": "nome-do-manga",
      "status": "ongoing",
      "chapters": 45,
      "url": "https://cdn.jsdelivr.net/gh/grupo/repo@main/manga1.json",
      "cover": "https://images.catbox.moe/cover1.jpg",
      "tags": ["a√ß√£o", "aventura"],
      "rating": 4.8,
      "last_updated": "2025-07-28T15:20:00Z"
    }
  ]
}
```

#### **api/search.json** (√çndice de busca)
```json
{
  "index": {
    "titles": [
      {"id": "manga-1", "title": "Nome do Manga", "alt_titles": ["Alternative Name"]},
      {"id": "manga-2", "title": "Outro Manga", "alt_titles": []}
    ],
    "tags": {
      "a√ß√£o": ["manga-1", "manga-3"],
      "aventura": ["manga-1", "manga-2"],
      "romance": ["manga-4"]
    },
    "authors": {
      "Autor 1": ["manga-1"],
      "Autor 2": ["manga-2", "manga-3"]
    }
  }
}
```

---

## üöÄ Casos de Uso

### **1. Grupo de Scanlation B√°sico**
```bash
# Escaneia pasta local com JSONs
indexador scan-local ./meus-jsons/

# Gera indexador
indexador generate --hub-name "Meu Grupo" --output ./index.json

# Upload para GitHub
indexador upload-github --repo "meugrupo/data" --file ./index.json
```

### **2. Sincroniza√ß√£o Autom√°tica**
```bash
# Monitora pasta e auto-atualiza
indexador watch ./jsons/ --auto-upload --repo "grupo/data"

# Valida CDN periodicamente
indexador validate-cdn --indexador ./index.json --schedule daily
```

### **3. API REST (Opcional)**
```bash
# Inicia servidor API local
indexador serve --port 8080 --indexador ./index.json

# Endpoints dispon√≠veis:
# GET /api/series        - Lista todas as s√©ries
# GET /api/search?q=...  - Busca por s√©ries
# GET /api/featured      - S√©ries em destaque
# GET /api/stats         - Estat√≠sticas do hub
```

---

## ‚öôÔ∏è Configura√ß√£o

### **config.json**
```json
{
  "hub": {
    "name": "Meu Grupo Scan",
    "subtitle": "Mang√°s em Portugu√™s",
    "description": "Descri√ß√£o do grupo...",
    "website": "https://meugrupo.com",
    "cover": "https://files.catbox.moe/cover.jpg",
    "lang": "pt-BR"
  },
  "social": {
    "discord": "https://discord.gg/...",
    "telegram": "https://t.me/...",
    "twitter": "https://twitter.com/...",
    "facebook": "https://facebook.com/..."
  },
  "github": {
    "token": "ghp_...",
    "repo": "meugrupo/data",
    "branch": "main",
    "folder": "api"
  },
  "cdn": {
    "preferred": "jsdelivr",
    "template": "https://cdn.jsdelivr.net/gh/{user}/{repo}@{branch}/{file}",
    "fallback": "raw.githubusercontent.com"
  },
  "automation": {
    "auto_upload": true,
    "validate_cdn": true,
    "monitor_changes": true,
    "schedule": "daily"
  }
}
```

---

## üì¶ Instala√ß√£o e Deploy

### **Para Usu√°rios**
```bash
# Via pip
pip install indexador-json

# Via execut√°vel
./IndexadorJSON.exe  # Windows
./IndexadorJSON      # Linux/Mac
```

### **Para Desenvolvedores**
```bash
# Clone e instale
git clone https://github.com/usuario/indexador-json
cd indexador-json
pip install -e ".[dev]"

# Execute
python main.py --help
```

### **Docker (Opcional)**
```dockerfile
FROM python:3.11-slim
COPY . /app
WORKDIR /app
RUN pip install -e .
CMD ["python", "main.py", "serve"]
```

---

## üîó Integra√ß√£o com Readers

### **Tachiyomi**
```json
{
  "name": "Meu Grupo Scan",
  "base_url": "https://cdn.jsdelivr.net/gh/grupo/data@main/",
  "indexador_url": "https://cdn.jsdelivr.net/gh/grupo/data@main/index.json",
  "supports": ["search", "latest", "popular"]
}
```

### **Web Readers**
```javascript
// Carregar indexador
const indexador = await fetch('https://cdn.jsdelivr.net/gh/grupo/data@main/index.json')
  .then(r => r.json());

// Buscar s√©ries
const series = await fetch(indexador.api.base_url + indexador.api.endpoints.all_series)
  .then(r => r.json());
```

---

## üéØ Roadmap da Aplica√ß√£o

### **Vers√£o 1.0 (MVP)**
- ‚úÖ Scanner de JSONs locais
- ‚úÖ Gerador de indexador b√°sico
- ‚úÖ Upload GitHub
- ‚úÖ Interface CLI

### **Vers√£o 1.1**
- üîÑ Interface QML/GUI
- üîÑ Validador de CDN
- üîÑ API REST opcional
- üîÑ Sincroniza√ß√£o autom√°tica

### **Vers√£o 1.2**
- ‚è≥ Scanner de reposit√≥rios remotos
- ‚è≥ Sistema de templates
- ‚è≥ Dashboard web
- ‚è≥ Integra√ß√£o com m√∫ltiplas CDNs

### **Vers√£o 2.0**
- ‚è≥ Suporte a m√∫ltiplos grupos
- ‚è≥ Sistema de federa√ß√£o
- ‚è≥ API GraphQL
- ‚è≥ Analytics avan√ßado

---

## üìö Recursos Adicionais

### **Documenta√ß√£o**
- `docs/API.md` - Refer√™ncia completa da API
- `docs/TEMPLATES.md` - Sistema de templates
- `docs/INTEGRATION.md` - Guias de integra√ß√£o
- `docs/EXAMPLES.md` - Exemplos pr√°ticos

### **Ferramentas**
- `tools/migrate.py` - Migra√ß√£o de indexadores antigos
- `tools/validate.py` - Validador standalone
- `tools/convert.py` - Conversores de formato

### **Comunidade**
- **Discord**: Suporte e discuss√µes
- **GitHub Issues**: Bugs e sugest√µes
- **Wiki**: Documenta√ß√£o comunit√°ria

---

**O Indexador JSON Standalone ser√° uma ferramenta poderosa e focada para grupos de scanlation criarem cat√°logos profissionais de suas obras!** üöÄ